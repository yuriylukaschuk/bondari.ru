import{p as L,j as w,E as Q,C as X,g as s,o as t,c as E,a as T,w as A,f as Y,i as y,t as c,n as _,K as Z,F as f,s as g,T as K,A as W,B as R,b as e,m as ee,r as H,d as V,h as te,l as se}from"./app-_Av8mXmI.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={__name:"MenuItem",props:{item:{type:Object,required:!0},level:{type:Number,default:1},isMobile:{type:Boolean,default:!1},parentOpen:{type:Boolean,default:!0}},emits:["close-mobile-menu"],setup(n,{emit:h}){const m=n,C=h,r=L(!1),u=w(()=>window.location.pathname),d=w(()=>m.item.children&&m.item.children.length>0),x=w(()=>u.value===`/${m.item.url}`||u.value.startsWith(`/${m.item.url}/`)),k=i=>`/${i.url}`,v=i=>{m.isMobile&&d.value?(i.preventDefault(),r.value=!r.value):C("close-mobile-menu")};Q(()=>m.parentOpen,i=>{!i&&m.isMobile&&(r.value=!1)});const O=i=>{m.isMobile&&(i.style.height="0",i.style.overflow="hidden",requestAnimationFrame(()=>{i.style.height=i.scrollHeight+"px"}))},j=i=>{m.isMobile&&(i.style.height="auto",i.style.overflow="visible")},S=i=>{m.isMobile&&(i.style.height=i.scrollHeight+"px",i.style.overflow="hidden",requestAnimationFrame(()=>{i.style.height="0"}))};return(i,$)=>{const N=X("MenuItem",!0);return t(),s("li",{class:_(["menu-item",{"has-children":d.value,"mobile-open":r.value&&n.isMobile,"desktop-item":!n.isMobile}])},[(t(),E(Z(d.value&&n.isMobile?"button":"a"),{href:d.value&&n.isMobile?null:k(n.item),class:_(["nav-link",{active:x.value,"has-arrow":d.value,"mobile-toggle":d.value&&n.isMobile}]),onClick:v},{default:A(()=>[Y(c(n.item.title)+" ",1),d.value&&n.isMobile?(t(),s("span",{key:0,class:_(["dropdown-arrow",{rotated:r.value}])}," ▼ ",2)):y("",!0)]),_:1},8,["href","class"])),T(K,{name:n.isMobile?"slide-down":"fade",onEnter:O,onAfterEnter:j,onLeave:S},{default:A(()=>[d.value&&(r.value||!n.isMobile)?(t(),s("ul",{key:0,class:_(["dropdown",{"arrow-top":n.level===1&&!n.isMobile,"mobile-dropdown":n.isMobile,"desktop-dropdown":!n.isMobile}])},[(t(!0),s(f,null,g(n.item.children,I=>(t(),E(N,{key:I.id,item:I,level:n.level+1,"is-mobile":n.isMobile,"parent-open":r.value,onCloseMobileMenu:$[0]||($[0]=F=>i.$emit("close-mobile-menu"))},null,8,["item","level","is-mobile","parent-open"]))),128))],2)):y("",!0)]),_:1},8,["name"])],2)}}},le=q(oe,[["__scopeId","data-v-804d617c"]]),ne={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90"},ae={class:"relative w-full max-w-6xl max-h-screen"},ie={class:"flex justify-center items-center h-full top-0 cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},re=["src","alt"],de={key:0,class:"absolute top-20 left-0 right-0 text-center text-white px-4"},ue={key:0,class:"text-xl font-bold"},ce={key:1,class:"text-sm opacity-80"},he={__name:"ModalPhoto",props:{photo:{type:Object,required:!0}},emits:["close"],setup(n,{emit:h}){const m=n,C=h,r=w(()=>m.photo||{}),u=d=>{switch(d.key){case"Escape":C("close");break;case"ArrowLeft":prevImage();break;case"ArrowRight":nextImage();break}};return W(()=>{window.addEventListener("keydown",u)}),R(()=>{window.removeEventListener("keydown",u),document.body.style.overflow=""}),(d,x)=>(t(),s("div",ne,[e("div",ae,[e("button",{onClick:x[0]||(x[0]=k=>d.$emit("close")),class:"absolute top-4 right-4 z-10 text-white p-2 rounded-full hover:bg-gray-200 transition"},[...x[1]||(x[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",ie,[T(K,{name:"fade",mode:"out-in"},{default:A(()=>[(t(),s("img",{key:r.value.id,src:r.value.filename,class:"max-h-[90vh] max-w-full object-contain",alt:r.value.title},null,8,re))]),_:1})]),r.value.title||r.value.description?(t(),s("div",de,[r.value.title?(t(),s("h2",ue,c(r.value.title),1)):y("",!0),r.value.description?(t(),s("p",ce,c(r.value.description),1)):y("",!0)])):y("",!0)])]))}},me=q(he,[["__scopeId","data-v-77320ef1"]]),ve=["content"],be=["content"],fe={class:"top-bar"},pe={class:"container"},ge={class:"d-md-none d-sm-inline-block font-bold text-amber-200"},_e={class:"d-none d-md-inline-block"},we=["href"],xe=["innerHTML"],ye=["href"],ke=["innerHTML"],Me={class:"float-right"},Ce={class:"d-none d-md-inline-block"},$e=["href"],Ie=["href"],Le={class:"navbar fixed-top"},Ae=["aria-expanded"],Oe={class:"d-none d-lg-block"},je={class:"container flex justify-between items-center"},Ee={href:"/",class:"text-2xl font-bold text-amber-800"},Te={class:"navbar navbar-expand-lg navbar-light bg-light"},Se={class:"site-menu js-clone-nav ml-auto"},Ne={class:"py-2"},Be={class:"container mx-auto py-8"},qe={class:"container mx-auto px-2"},Fe={class:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow"},Pe={key:0,class:"image-set-container"},De={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},ze=["onClick"],He=["src","alt","title","onClick"],Ve={key:1,class:"image-block-container"},Ke={class:"md:w-1/3"},We=["src","alt","title","onClick"],Re={class:"md:w-2/3 space-y-4"},Ue={key:0,class:"mt-1"},Ge={key:1},Je={key:2,class:"text-block-container"},Qe={class:"space-y-4"},Xe={key:0,class:"ul list-unstyled mt-1"},Ye={key:1},Ze={key:0,class:"py-20"},et={class:"container mx-auto px-4"},tt={class:"max-w-4xl mx-auto text-center"},st={class:"text-3xl font-bold text-amber-800 mb-6"},ot={class:"bg-amber-800 text-white py-12"},lt={class:"container mx-auto px-4"},nt={class:"grid md:grid-cols-3 gap-8"},at={class:"text-xl font-bold mb-4"},it={class:"text-amber-200"},rt=["href"],dt={class:"text-amber-200"},ut=["href"],ct={class:"flex space-x-4"},ht=["href"],mt=["href"],vt=["href"],bt={__name:"AppLayout",props:{userdata:{type:[Object,Array],required:!0,default:()=>({})},blocks:{type:[Object,Array],required:!0,default:()=>({})},feedback:{type:[Object,Array],required:!0,default:()=>[]},menuItems:{type:[Object,Array],default:()=>ee().props.menuItems||[]},meta:{type:[Object,Array],required:!0,default:()=>({})}},setup(n){const h=n,m=w(()=>{var l;return((l=h.meta)==null?void 0:l.title)||"Производство дубовых бочек и кадок"}),C=w(()=>{var l;return((l=h.meta)==null?void 0:l.keywords)||""}),r=w(()=>{var l;return((l=h.meta)==null?void 0:l.description)||""}),u=L(!1),d=L(!1),x=L({}),k=L(!1),v=w(()=>h.userdata),O=w(()=>"mailto:"+h.userdata.email),j=w(()=>"tel:"+h.userdata.phoneShort),S=()=>{window.location.href=h.userdata.max},i=()=>{window.location.href=`tel:${h.userdata.phoneShort}`},$=l=>{x.value=l,k.value=!0,document.body.style.overflow="hidden"},N=()=>{k.value=!1,document.body.style.overflow=""};function I(l){return Object.keys(l).map(o=>l[o])}const F=()=>{u.value=!u.value,console.log("isMobileMenuOpen 1 = "+u.value)};console.log("isMobileMenuOpen 2 = "+u.value);const P=()=>{d.value&&(u.value=!1),console.log("isMobileMenuOpen 3 = "+u.value)},B=()=>{d.value=window.innerWidth<992,d.value||(u.value=!1)};W(()=>{B(),window.addEventListener("resize",B),window.addEventListener("click",D)}),R(()=>{window.removeEventListener("resize",B),window.removeEventListener("click",D)});const D=l=>{!l.target.closest(".navbar")&&u.value&&P()},z=l=>[7,8].includes(l),U=l=>l.images>0,G=l=>l.imageset===1,J=l=>l.image_position,M=l=>Object.keys(l).map(o=>l[o]);return(l,a)=>(t(),s(f,null,[e("div",null,[T(V(te),null,{default:A(()=>[e("title",null,c(m.value),1),e("meta",{name:"keywords",content:C.value},null,8,ve),e("meta",{name:"description",content:r.value},null,8,be)]),_:1})]),e("header",fe,[e("div",pe,[e("div",ge,c(v.value.orgShortName),1),e("div",_e,[e("a",{href:O.value,class:"text-white"},[a[0]||(a[0]=e("span",{class:"mr-2 text-white icon-envelope-open-o"},null,-1)),e("span",{innerHTML:v.value.email},null,8,xe)],8,we),e("a",{href:j.value,class:"text-white"},[a[1]||(a[1]=e("span",{class:"mr-2 text-white icon-phone"},null,-1)),e("span",{innerHTML:v.value.phoneFull},null,8,ke)],8,ye)]),e("div",Me,[e("div",Ce,[e("a",{href:v.value.telegramBot,target:"_blank",class:"text-white"},[...a[2]||(a[2]=[e("span",{class:"mr-2 text-white icon-telegram"},null,-1),e("span",null,"Telegram",-1)])],8,$e),e("a",{href:v.value.max,target:"_blank",class:"text-white"},[...a[3]||(a[3]=[e("span",{class:"mr-2 text-white icon-whatsapp"},null,-1),e("span",null,"Max",-1)])],8,Ie),T(V(se),{href:l.route("login")},{default:A(()=>[...a[4]||(a[4]=[e("span",{class:"ml-2 text-amber-500"},"Войти",-1)])]),_:1},8,["href"])]),e("nav",Le,[d.value?(t(),s("button",{key:0,class:"navbar-toggler",type:"button",onClick:F,"aria-controls":"navbarNav","aria-expanded":u.value},[...a[5]||(a[5]=[e("span",{class:"navbar-toggler-icon"},null,-1)])],8,Ae)):y("",!0)])])])]),e("div",Oe,[e("div",je,[e("a",Ee,c(v.value.orgShortName),1),e("nav",Te,[e("div",{class:_(["navbar-collapse",{show:u.value}]),id:"navbarNav"},[e("ul",Se,[(t(!0),s(f,null,g(n.menuItems,p=>(t(),E(le,{key:p.id,item:p,level:1,"is-mobile":d.value,onCloseMobileMenu:P},null,8,["item","is-mobile"]))),128))])],2)])])]),H(l.$slots,"MainPageTopSection",{},void 0,!0),e("section",Ne,[e("div",Be,[k.value?(t(),E(me,{key:0,photo:x.value,onClose:N},null,8,["photo"])):y("",!0)]),e("div",qe,[e("div",Fe,[(t(!0),s(f,null,g(n.blocks,p=>(t(),s("div",{key:p.id,class:"bg-white rounded-lg shadow-md p-2"},[G(p)?(t(),s("div",Pe,[e("div",De,[(t(!0),s(f,null,g(p.components,o=>(t(),s("div",{key:o.id,onClick:b=>l.showLargeImage(o.photo.filename),class:_([o.comp_input,"component-item relative group"])},[e("img",{src:o.photo.thumbnail,alt:o.photo.description,title:o.photo.title,onClick:b=>$(o.photo),class:"cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},null,8,He)],10,ze))),128))])])):U(p)?(t(),s("div",Ve,[e("div",{class:_(["flex flex-col md:flex-row gap-6",{"md:flex-row-reverse":J(p)==="photo-right"}])},[e("div",Ke,[(t(!0),s(f,null,g(I(p.components).filter(o=>z(o.tag_id)),o=>(t(),s("div",{key:o.id,class:_([o.comp_input,"component-item relative group img-fluid"])},[e("img",{src:o.photo.thumbnail,alt:o.photo.description,title:o.photo.title,onClick:b=>$(o.photo),class:"cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},null,8,We)],2))),128))]),e("div",Re,[(t(!0),s(f,null,g(I(p.components).filter(o=>!z(o.tag_id)),o=>(t(),s("div",{key:o.id,class:_([o.class,"component-item relative group"])},[o.class==="list-bulleted"?(t(),s("ul",Ue,[(t(!0),s(f,null,g(M(o.content),b=>(t(),s("li",null,c(b),1))),256))])):o.class==="list-numbered"?(t(),s("ol",Ge,[(t(!0),s(f,null,g(M(o.content),b=>(t(),s("li",null,c(b),1))),256))])):(t(!0),s(f,{key:2},g(M(o.content),b=>(t(),s("p",{class:_(o.position)},c(b),3))),256))],2))),128))])],2)])):(t(),s("div",Je,[e("div",Qe,[(t(!0),s(f,null,g(p.components,o=>(t(),s("div",{key:o.id,class:_([o.class,"component-item relative group"])},[o.class==="list-bulleted"?(t(),s("ul",Xe,[(t(!0),s(f,null,g(M(o.content),b=>(t(),s("li",null,c(b),1))),256))])):o.class==="list-numbered"?(t(),s("ol",Ye,[(t(!0),s(f,null,g(M(o.content),b=>(t(),s("li",null,c(b),1))),256))])):(t(!0),s(f,{key:2},g(M(o.content),b=>(t(),s("p",{class:_(o.position)},c(b),3))),256))],2))),128))])]))]))),128))])])]),H(l.$slots,"MainPageFeaturesSection",{},void 0,!0),h.feedback.present==1?(t(),s("section",Ze,[e("div",et,[e("div",tt,[e("h2",st,c(h.feedback.title),1),a[6]||(a[6]=e("p",{class:"text-xl text-gray-700 mb-8"}," Свяжитесь с нами для консультации и расчета стоимости ",-1)),e("div",{class:"flex flex-col sm:flex-row gap-4 justify-center"},[e("button",{onClick:i,class:"bg-amber-600 hover:bg-amber-700 text-white px-8 py-3 rounded-lg transition-colors"}," Позвонить нам "),e("button",{onClick:S,target:"_blank",class:"border-2 border-amber-600 text-amber-600 hover:bg-amber-600 hover:text-white px-8 py-3 rounded-lg transition-colors"}," Написать в Max ")])])])])):y("",!0),e("footer",ot,[e("div",lt,[e("div",nt,[e("div",null,[e("h3",at,c(v.value.orgFullName),1),a[7]||(a[7]=e("p",{class:"text-amber-200"},"Качественные дубовые бочки для вина и коньяка",-1))]),e("div",null,[a[8]||(a[8]=e("h3",{class:"text-xl font-bold mb-4"},"Контакты",-1)),e("p",it,[e("a",{href:j.value},c(v.value.phoneFull),9,rt)]),e("p",dt,[e("a",{href:O.value},c(v.value.email),9,ut)])]),e("div",null,[a[9]||(a[9]=e("h3",{class:"text-xl font-bold mb-4"},"Мы в соцсетях",-1)),e("div",ct,[e("a",{href:v.value.vk,target:"_blank",class:"text-amber-200 hover:text-white transition-colors"}," Вконтакте ",8,ht),e("a",{href:v.value.ok,target:"_blank",class:"text-amber-200 hover:text-white transition-colors"}," Одноклассники ",8,mt),e("a",{href:v.value.rutube,target:"_blank",class:"text-amber-200 hover:text-white transition-colors"}," RuTube ",8,vt)])])])])])],64))}},gt=q(bt,[["__scopeId","data-v-25b1c624"]]);export{gt as A};
