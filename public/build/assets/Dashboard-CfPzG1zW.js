import{_ as ue}from"./AuthenticatedLayout-06MV8o-d.js";import{u as D,p as P,j as B,g as o,o as l,a as d,b as e,d as t,h as Y,e as J,t as g,k as N,q as E,F as x,s as C,w as L,n as A,i as M,x as R,v as le,f as de,y as re,c as H,z as oe,A as ne,B as ce,T as me}from"./app-_Av8mXmI.js";import{_ as k,b as O,a as j}from"./TextInput-C8So1Y_c.js";import{P as G}from"./PrimaryButton-C9QgT6ZQ.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DFJg_f-J.js";/* empty css            */const pe={class:"upload-form"},ge={class:"text-lg font-medium mb-4"},fe=["value","selected"],_e=["value"],ve={class:"mt-4 flex items-center justify-end"},be={key:0},ye={key:1},he={key:0,class:"space-y-4"},ke={class:"p-4 bg-gray-50 rounded-lg"},xe={class:"text-lg font-medium mb-4"},we={class:"mt-2"},$e=["id","onUpdate:modelValue"],Ve=["value","selected"],ze={class:"mt-2"},Ue={class:"mt-2"},Ce={class:"mt-2"},Se={class:"mt-2"},je={class:"mt-2"},Ae=["id","onUpdate:modelValue"],Ie=["value","selected"],Oe={class:"mt-2"},Ne={class:"flex justify-between items-center mt-4"},qe={class:"inline-flex items-center"},Fe=["id","onUpdate:modelValue"],Me=["onClick"],Te={class:"flex justify-between items-center mt-4"},Be={key:0},Ee={class:"text-right"},Pe={key:0},Le={key:1},Re={key:1,class:"p-4 text-center text-gray-500 bg-gray-100 rounded-md"},De={__name:"Razdels",props:{dashboard_title:{type:String},lvl:{type:[Number,String]},parent_id:{type:Number},razdels:{type:Object},err:{type:String}},setup(n){const m=n,s=D({parent_id:m.parent_id,lvl:m.lvl,npp:null,title:null,description:null,keywords:null,url:null,feedback:0,feedback_title:""}),i=D({razdels:m.razdels}),V=P(m.dashboard_title),y=B(()=>Object.keys(m.razdels).length+1),q=P(Array.from({length:y.value},(v,u)=>u+1)),F=P([{value:0,label:"Нет"},{value:1,label:"Есть"}]),f=()=>{R.get(route("razdels.list"),{parent_id:0,lvl:1},{preserveState:!0})},_=()=>{s.put(route("razdels.store",{parent_id:m.parent_id,lvl:m.lvl}),{preserveScroll:!0,onSuccess:()=>{s.reset(),R.reload({only:["razdels"]})}})},I=()=>{i.post(route("razdels.update",{parent_id:m.parent_id,lvl:m.lvl}),{preserveScroll:!0,onSuccess:()=>R.reload({only:["razdels"]})})},S=v=>{R.get(route("razdels.list"),{razdel_id:v},{preserveState:!0})};return(v,u)=>(l(),o(x,null,[d(t(Y),{title:V.value},null,8,["title"]),e("div",pe,[e("form",{onSubmit:J(_,["prevent"]),class:"mb-8 p-4 bg-gray-50 rounded-lg"},[e("h3",ge,"Добавление нового раздела на "+g(m.lvl)+" уровень",1),e("div",null,[d(k,{for:"npp",value:"№ п/п"}),N(e("select",{id:"npp","onUpdate:modelValue":u[0]||(u[0]=c=>t(s).npp=c),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[u[7]||(u[7]=e("option",{disabled:"",value:null},"Номер раздела на текущем уровне",-1)),(l(!0),o(x,null,C(q.value,c=>(l(),o("option",{key:c,value:c,selected:c==y.value},g(c),9,fe))),128))],512),[[E,t(s).npp]]),d(O,{class:"mt-1",message:t(s).errors.npp},null,8,["message"])]),e("div",null,[d(k,{for:"title",value:"Наименование раздела *"}),d(j,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:t(s).title,"onUpdate:modelValue":u[1]||(u[1]=c=>t(s).title=c),required:""},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.title},null,8,["message"])]),e("div",null,[d(k,{for:"description",value:"Описание"}),d(j,{id:"description",type:"text",class:"mt-1 block w-full",modelValue:t(s).description,"onUpdate:modelValue":u[2]||(u[2]=c=>t(s).description=c)},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.description},null,8,["message"])]),e("div",null,[d(k,{for:"keywords",value:"Ключевые слова"}),d(j,{id:"keywords",type:"text",class:"mt-1 block w-full",modelValue:t(s).keywords,"onUpdate:modelValue":u[3]||(u[3]=c=>t(s).keywords=c)},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.keywords},null,8,["message"])]),e("div",null,[d(k,{for:"url",value:"Адрес страницы"}),d(j,{id:"url",type:"text",class:"mt-1 block w-full",modelValue:t(s).url,"onUpdate:modelValue":u[4]||(u[4]=c=>t(s).url=c)},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.url},null,8,["message"])]),e("div",null,[d(k,{for:"feedback",value:"Наличие формы обратной связи"}),N(e("select",{id:"feedback","onUpdate:modelValue":u[5]||(u[5]=c=>t(s).feedback=c),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[u[8]||(u[8]=e("option",{disabled:"",value:null},"Наличие формы обратной связи",-1)),(l(!0),o(x,null,C(F.value,c=>(l(),o("option",{key:c.value,value:c.value},g(c.label),9,_e))),128))],512),[[E,t(s).feedback]]),d(O,{class:"mt-1",message:t(s).errors.feedback},null,8,["message"])]),e("div",null,[d(k,{for:"feedback_title",value:"Призыв на форме обратной связи"}),d(j,{id:"feedback_title",type:"text",class:"mt-1 block w-full",modelValue:t(s).feedback_title,"onUpdate:modelValue":u[6]||(u[6]=c=>t(s).feedback_title=c)},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.feedback_title},null,8,["message"])]),e("div",ve,[d(G,{class:A(["px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-25":t(s).processing}]),disabled:t(s).processing},{default:L(()=>[t(s).processing?(l(),o("span",be,"Добавление...")):(l(),o("span",ye,"Добавить раздел"))]),_:1},8,["class","disabled"])])],32),y.value?(l(),o("div",he,[e("form",ke,[e("h3",xe,"Редактирование разделов "+g(m.lvl)+"-го уровня",1),(l(!0),o(x,null,C(t(i).razdels,(c,w)=>(l(),o("div",{key:c.id,class:"p-6 hover:bg-gray-50"},[e("div",we,[d(k,{for:`npp-${c.id}`,value:"Раздел № "},null,8,["for"]),N(e("select",{id:`npp-${c.id}`,"onUpdate:modelValue":$=>t(i).razdels[w].npp=$,class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[u[9]||(u[9]=e("option",{disabled:"",value:null},"Укажите номер п/п раздела на текущем уровне",-1)),(l(!0),o(x,null,C(q.value,$=>(l(),o("option",{key:$,value:$,selected:$===t(i).razdels[w].npp},g($),9,Ve))),128))],8,$e),[[E,t(i).razdels[w].npp]])]),e("div",ze,[d(k,{for:`title-${c.id}`,value:"Наименование раздела"},null,8,["for"]),d(j,{id:`title-${c.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).razdels[w].title,"onUpdate:modelValue":$=>t(i).razdels[w].title=$},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",Ue,[d(k,{for:`description-${c.id}`,value:"Описание"},null,8,["for"]),d(j,{id:`description-${c.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).razdels[w].description,"onUpdate:modelValue":$=>t(i).razdels[w].description=$},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",Ce,[d(k,{for:`keywords-${c.id}`,value:"Ключевые слова"},null,8,["for"]),d(j,{id:`keywords-${c.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).razdels[w].keywords,"onUpdate:modelValue":$=>t(i).razdels[w].keywords=$},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",Se,[d(k,{for:`url-${c.id}`,value:"Адрес страницы"},null,8,["for"]),d(j,{id:`url-${c.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).razdels[w].url,"onUpdate:modelValue":$=>t(i).razdels[w].url=$},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",je,[d(k,{for:`feedback-${c.id}`,value:"Наличие формы обратной связи"},null,8,["for"]),N(e("select",{id:`feedback-${c.id}`,"onUpdate:modelValue":$=>t(i).razdels[w].feedback=$,class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[u[10]||(u[10]=e("option",{disabled:"",value:null},"Наличие формы обратной связи",-1)),(l(!0),o(x,null,C(F.value,$=>(l(),o("option",{key:$.value,value:$.value,selected:$.value===t(i).razdels[w].feedback},g($.label),9,Ie))),128))],8,Ae),[[E,t(i).razdels[w].feedback]])]),e("div",Oe,[d(k,{for:`feedback_title-${c.id}`,value:"Призыв на форме обратной связи"},null,8,["for"]),d(j,{id:`feedback_title-${c.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).razdels[w].feedback_title,"onUpdate:modelValue":$=>t(i).razdels[w].feedback_title=$},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",Ne,[e("label",qe,[N(e("input",{type:"checkbox",id:`delete-${c.id}`,"onUpdate:modelValue":$=>t(i).razdels[w].del=$,class:"rounded-sm border-gray-300 text-indigo-600 shadow-xs focus:border-indigo-300 focus:ring-3 focus:ring-indigo-200 focus:ring-opacity-50"},null,8,Fe),[[le,t(i).razdels[w].del]]),u[11]||(u[11]=e("span",{class:"ml-2 text-sm text-gray-600"},"Удалить раздел",-1))]),e("button",{type:"button",onClick:$=>S(c.id),class:A(["px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-50":t(i).processing}])}," Редактировать ",10,Me)])]))),128)),e("div",Te,[m.lvl>1?(l(),o("div",Be,[e("a",{href:"#",class:"btn px-4 py-2 text-sm font-medium text-white bg-blue-300 rounded-md hover:bg-blue-400 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-blue-200",onClick:J(f,["prevent"])}," На предыдущий уровень ")])):M("",!0),e("div",Ee,[d(G,{class:A(["px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-50":t(i).processing}]),disabled:t(i).processing,onClick:I},{default:L(()=>[t(i).processing?(l(),o("span",Pe,"Сохранение...")):(l(),o("span",Le,"Сохранить изменения"))]),_:1},8,["class","disabled"])])])])])):(l(),o("div",Re," Нет разделов для отображения "))])],64))}},Ge=te(De,[["__scopeId","data-v-f8fc059e"]]),He={class:"upload-form"},Je=["value"],Qe={class:"mt-4"},We={class:"mt-4"},Xe={class:"mt-4"},Ye={class:"mt-4 flex items-center justify-end"},Ze={key:0,class:"space-y-4"},Ke={class:"shrink-0 mr-4"},et=["src","alt"],tt={class:"flex-1 space-y-2"},st=["id","onUpdate:modelValue"],lt={class:"flex items-center"},ot=["id","onUpdate:modelValue"],dt=["for"],it={key:1,class:"p-4 text-center text-gray-500 bg-gray-100 rounded-md"},at={class:"mt-4 flex justify-end"},rt={key:0},nt={key:1},ut={__name:"Photos",props:{dashboard_title:{type:String,default:"Управление фотографиями"},razdel_id:{type:[Number,String]},razdels:{type:[Object,Array],required:!0},photos:{type:[Object,Array],default:()=>[]},err:{type:String}},setup(n){const m=n,s=D({razdel_id:m.razdel_id||null,photo:null,title:"",description:""}),i=D({photos:m.photos}),V=P(m.dashboard_title),y=(S,v="children")=>Array.isArray(S)?S.flatMap(({[v]:u,...c})=>[c,...y(u,v)]):[],q=B(()=>y(m.razdels));function F(S){s.photo=S.target.files[0]}const f=()=>{if(!s.photo){alert("Обязательно укажите фото для добавления на сайт");return}s.post(route("photos.upload"),{forceFormData:!0,onSuccess:()=>{s.reset("photo","title","description")}})},_=()=>{R.get(route("photos.index"),{razdel_id:s.razdel_id},{preserveState:!0})},I=()=>{i.put(route("photos.update"),{preserveScroll:!0})};return(S,v)=>(l(),o(x,null,[d(t(Y),{title:V.value},null,8,["title"]),e("div",He,[e("form",{onSubmit:J(f,["prevent"]),class:"mb-8 p-4 bg-gray-50 rounded-lg"},[v[6]||(v[6]=e("h3",{class:"text-lg font-medium mb-4"},"Загрузка фотографий",-1)),e("div",null,[v[4]||(v[4]=e("label",{class:"block text-sm font-medium text-gray-700"}," Раздел (страница) сайта ",-1)),N(e("select",{"onUpdate:modelValue":v[0]||(v[0]=u=>t(s).razdel_id=u),onChange:_,class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[v[3]||(v[3]=e("option",{disabled:"",value:null},"Укажите раздел сайта",-1)),(l(!0),o(x,null,C(q.value,u=>(l(),o("option",{key:u.id,value:u.id},g(u.title),9,Je))),128))],544),[[E,t(s).razdel_id]])]),e("div",Qe,[d(k,{for:"photo",value:"Выберите файл для загрузки"}),e("input",{type:"file",id:"photo",onChange:F,class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,32)]),e("div",We,[d(k,{for:"title",value:"Наименование фотографии"}),d(j,{id:"title",type:"text",class:"mt-1 block w-full",modelValue:t(s).title,"onUpdate:modelValue":v[1]||(v[1]=u=>t(s).title=u),autofocus:"",autocomplete:"title"},null,8,["modelValue"]),d(O,{class:"mt-2",message:t(s).errors.title},null,8,["message"])]),e("div",Xe,[d(k,{for:"description",value:"Описание фотографии"}),d(j,{id:"description",type:"text",class:"mt-1 block w-full",modelValue:t(s).description,"onUpdate:modelValue":v[2]||(v[2]=u=>t(s).description=u),autocomplete:"description"},null,8,["modelValue"]),d(O,{class:"mt-2",message:t(s).errors.description},null,8,["message"])]),e("div",Ye,[d(G,{class:A(["px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-25":t(s).processing}]),disabled:t(s).processing},{default:L(()=>[...v[5]||(v[5]=[de(" Загрузить ",-1)])]),_:1},8,["class","disabled"])])],32),e("form",{onSubmit:J(I,["prevent"]),class:"p-4 bg-gray-50 rounded-lg"},[v[7]||(v[7]=e("h3",{class:"text-lg font-medium mb-4"},"Редактирование фотографий",-1)),t(i).photos.length?(l(),o("div",Ze,[(l(!0),o(x,null,C(t(i).photos,(u,c)=>(l(),o("div",{key:u.id,class:"flex items-start p-4 border rounded-md bg-white"},[e("div",Ke,[e("img",{src:u.thumbnail,alt:u.description,class:"object-cover w-32 h-32 rounded-md"},null,8,et)]),e("div",tt,[e("div",null,[d(k,{for:"title-"+u.id,value:"Название"},null,8,["for"]),d(j,{id:"title-"+u.id,type:"text",class:"mt-1 block w-full",modelValue:t(i).photos[c].title,"onUpdate:modelValue":w=>t(i).photos[c].title=w},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",null,[d(k,{for:"desc-"+u.id,value:"Описание"},null,8,["for"]),N(e("textarea",{id:"desc-"+u.id,"onUpdate:modelValue":w=>t(i).photos[c].description=w,rows:"2",class:"mt-1 block w-full border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},null,8,st),[[re,t(i).photos[c].description]])]),e("div",lt,[N(e("input",{type:"checkbox",id:"delete-"+u.id,"onUpdate:modelValue":w=>t(i).photos[c].del=w,class:"w-4 h-4 text-indigo-600 border-gray-300 rounded-sm focus:ring-indigo-500"},null,8,ot),[[le,t(i).photos[c].del]]),e("label",{for:"delete-"+u.id,class:"ml-2 text-sm text-gray-600"}," Удалить фотографию ",8,dt)])])]))),128))])):(l(),o("div",it," Нет фотографий в выбранном разделе ")),e("div",at,[d(G,{class:A(["px-4 py-2",{"opacity-25":t(i).processing}]),disabled:t(i).processing},{default:L(()=>[t(i).processing?(l(),o("span",rt,"Сохранение...")):(l(),o("span",nt,"Сохранить изменения"))]),_:1},8,["class","disabled"])])],32)])],64))}},ct=te(ut,[["__scopeId","data-v-51335eed"]]),mt={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},pt={class:"bg-white shadow-sm rounded-lg p-6 mb-8"},gt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ft={class:"flex justify-end pt-2"},_t={key:0},vt={key:1},bt={class:"bg-white shadow-sm rounded-lg overflow-hidden"},yt={key:0,class:"divide-y divide-gray-200"},ht={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},kt={class:"inline-flex items-center"},xt=["id","onUpdate:modelValue"],wt={class:"px-6 py-4 bg-gray-50 text-right"},$t={key:0},Vt={key:1},zt={key:1,class:"p-6 text-center text-gray-500"},Ut={__name:"Tags",props:{dashboard_title:{type:String,default:"Управление компонентами для блоков"},tags:{type:[Object,Array],default:()=>[]},err:{type:String}},setup(n){const m=n,s=D({name:"",class:""}),i=D({tags:m.tags}),V=B(()=>Object.keys(m.tags).length+1),y=()=>{s.put(route("tags.create"),{preserveScroll:!0,onSuccess:()=>{s.reset(),R.reload({only:["tags"]})}})},q=()=>{i.post(route("tags.update"),{preserveScroll:!0,onSuccess:()=>{R.reload({only:["tags"]})}})};return(F,f)=>(l(),o(x,null,[d(t(Y),{title:n.dashboard_title},null,8,["title"]),e("div",mt,[e("div",pt,[f[2]||(f[2]=e("h2",{class:"text-lg font-medium mb-4"},"Добавить новый компонент",-1)),e("form",{onSubmit:J(y,["prevent"]),class:"space-y-4"},[e("div",gt,[e("div",null,[d(k,{for:"name",value:"Наименование *"}),d(j,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(s).name,"onUpdate:modelValue":f[0]||(f[0]=_=>t(s).name=_),required:""},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.name},null,8,["message"])]),e("div",null,[d(k,{for:"class",value:"Класс"}),d(j,{id:"class",type:"text",class:"mt-1 block w-full",modelValue:t(s).class,"onUpdate:modelValue":f[1]||(f[1]=_=>t(s).class=_),required:""},null,8,["modelValue"]),d(O,{class:"mt-1",message:t(s).errors.class},null,8,["message"])])]),e("div",ft,[d(G,{class:A({"opacity-50":t(s).processing}),disabled:t(s).processing},{default:L(()=>[t(s).processing?(l(),o("span",_t,"Добавление...")):(l(),o("span",vt,"Добавить тег"))]),_:1},8,["class","disabled"])])],32)]),e("div",bt,[f[4]||(f[4]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium"},"Редактирование компонентов")],-1)),V.value?(l(),o("div",yt,[e("form",{onSubmit:J(q,["prevent"])},[(l(!0),o(x,null,C(t(i).tags,(_,I)=>(l(),o("div",{key:_.id,class:"p-2 hover:bg-gray-50"},[e("div",ht,[e("div",null,[I==1?(l(),H(k,{key:0,for:`name-${_.id}`,value:"Наименование"},null,8,["for"])):M("",!0),d(j,{id:`name-${_.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).tags[I].name,"onUpdate:modelValue":S=>t(i).tags[I].name=S},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",null,[I==1?(l(),H(k,{key:0,for:`class-${_.id}`,value:"Класс"},null,8,["for"])):M("",!0),d(j,{id:`class-${_.id}`,type:"text",class:"mt-1 block w-full",modelValue:t(i).tags[I].class,"onUpdate:modelValue":S=>t(i).tags[I].class=S},null,8,["id","modelValue","onUpdate:modelValue"])]),e("div",kt,[e("label",null,[N(e("input",{type:"checkbox",id:`delete-${_.id}`,"onUpdate:modelValue":S=>t(i).tags[I].del=S,class:"rounded-sm border-gray-300 text-indigo-600 shadow-xs focus:border-indigo-300 focus:ring-3 focus:ring-indigo-200 focus:ring-opacity-50"},null,8,xt),[[le,t(i).tags[I].del]]),f[3]||(f[3]=e("span",{class:"ml-2 text-sm text-gray-600"},"Удалить компонент",-1))])])])]))),128)),e("div",wt,[d(G,{class:A({"opacity-50":t(i).processing}),disabled:t(i).processing},{default:L(()=>[t(i).processing?(l(),o("span",$t,"Сохранение...")):(l(),o("span",Vt,"Сохранить изменения"))]),_:1},8,["class","disabled"])])],32)])):(l(),o("div",zt," Нет тегов для отображения "))])])],64))}},Ct={class:"upload-form"},St=["value"],jt={class:"mt-2"},At=["value"],It={class:"mt-2"},Ot=["value"],Nt={class:"mt-2"},qt=["value"],Ft={key:0,class:"mt-2"},Mt=["value"],Tt={key:1,class:"mt-2"},Bt=["value"],Et={class:"mt-4 flex items-center justify-end"},Pt={key:2,class:"text-red-700 font-bold m-2"},Lt={class:"container mx-auto p-4 max-w-6xl"},Rt={key:0,class:"space-y-6"},Dt={class:"flex justify-between items-center mb-4"},Gt={class:"text-lg font-semibold text-gray-800"},Ht={class:"text-sm text-gray-500"},Jt={class:"border-2 border-dashed border-gray-200 rounded-lg p-4"},Qt={key:0,class:"image-set-container"},Wt={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Xt={class:"component-content"},Yt={class:"text-sm font-medium"},Zt={key:0,class:"text-xs text-gray-600 mt-1"},Kt=["onClick"],es={key:1,class:"image-block-container"},ts={class:"md:w-1/3"},ss={class:"component-content"},ls={class:"text-sm font-medium"},os=["onClick"],ds={class:"md:w-2/3 space-y-4"},is={class:"component-content"},as={class:"text-sm font-medium"},rs={key:0,class:"text-xs text-gray-600 mt-1"},ns=["onClick"],us={key:2,class:"text-block-container"},cs={class:"space-y-4"},ms={class:"component-content"},ps={class:"text-sm font-medium"},gs={key:0,class:"text-xs text-gray-600 mt-1"},fs=["onClick"],_s={class:"mt-4 flex justify-end"},vs={key:0},bs={key:1},ys={key:1,class:"text-center py-12 bg-gray-50 rounded-lg"},hs={__name:"Blocks",props:{dashboard_title:{type:String},razdel_id:{type:Number},razdels:{type:[Object,Array],required:!0},blocks:{type:[Object,Array],required:!0,default:()=>({})},tags:{type:[Object,Array],required:!0,default:()=>({})},positions:{type:Object,required:!0},err:{type:String}},setup(n){const m=n,s=D({razdel_id:m.razdel_id||null,tag_id:null,block:null,number:null,photo_count:null,position_id:null}),i=D({blocks:m.blocks}),V=(z,p="children")=>Array.isArray(z)?z.flatMap(({[p]:r,...b})=>[b,...V(r,p)]):[],y=P(10),q=oe(m.blocks),F=B(()=>V(m.razdels)),f=B(()=>Object.keys(m.blocks).length+1),_=B(()=>f.value>0),I=B(()=>{if(!s.block)return 0;const z=Object.values(m.blocks).find(p=>p.npp===s.block);return(z==null?void 0:z.positions)+1||1}),S=B(()=>Array.from({length:I.value},(z,p)=>p+1));function v(){s.number=null}const u=()=>{R.get(route("blocks.index"),{razdel_id:s.razdel_id},{preserveState:!0})},c=()=>{if(!s.tag_id){alert("Обязательно укажите компонент для размещения");return}if(!s.block){alert("Обязательно укажите номер блока");return}if(!s.number){alert("Обязательно укажите порядковый номер компонента в блоке");return}if(s.tag_id==8&&!s.photo_count){alert("Обязательно укажите количество фотографий в сете");return}if(s.tag_id!=8&&!s.position_id){alert("Обязательно укажите расположение элемента в блоке");return}s.post(route("blocks.create"),{preserveScroll:!0,onSuccess:()=>{s.reset()},onError:z=>{console.error(z)}})},w=(z,p,r)=>{confirm("Вы уверены, что хотите удалить этот компонент?")&&R.put(route("components.delete"),{razdel_id:z,block_id:p,component_id:r},{preserveScroll:!0})},$=(z,p,r)=>{confirm("Вы уверены, что хотите удалить этот блок?")&&R.post(route("blocks.destroy"),{razdel_id:z,block_id:p,npp:r},{preserveScroll:!0})},Z=z=>{var p;return((p=m.tags[z])==null?void 0:p.name)||"Неизвестный тег"},W=z=>{var p;return((p=m.tags[z])==null?void 0:p.comp_input)||""},se=z=>[7,8].includes(z),Q=z=>z.images>0,X=z=>z.imageset===1,K=z=>z.image_position;return(z,p)=>(l(),o(x,null,[d(t(Y),{title:n.dashboard_title},null,8,["title"]),e("div",Ct,[e("form",{onSubmit:J(c,["prevent"]),class:"mb-8 p-4 bg-gray-50 rounded-lg"},[p[14]||(p[14]=e("h3",{class:"text-lg font-medium mb-4"},"Добавление блоков на страницу",-1)),e("div",null,[p[7]||(p[7]=e("label",{class:"block text-sm font-medium text-gray-700"}," Раздел (страница) сайта ",-1)),N(e("select",{"onUpdate:modelValue":p[0]||(p[0]=r=>t(s).razdel_id=r),onChange:u,class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[p[6]||(p[6]=e("option",{disabled:"",value:null},"Укажите раздел сайта",-1)),(l(!0),o(x,null,C(F.value,r=>(l(),o("option",{key:r.id,value:r.id},g(r.title),9,St))),128))],544),[[E,t(s).razdel_id]])]),e("div",jt,[d(k,{for:"blocks",value:"Номер блока на странице"}),N(e("select",{id:"blocks","onUpdate:modelValue":p[1]||(p[1]=r=>t(s).block=r),onChange:v,class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[p[8]||(p[8]=e("option",{disabled:"",value:null},"Укажите номер блока на странице",-1)),(l(!0),o(x,null,C(f.value,r=>(l(),o("option",{key:r,value:r},g(r),9,At))),128))],544),[[E,t(s).block]]),d(O,{class:"mt-1",message:t(s).errors.block},null,8,["message"])]),e("div",It,[d(k,{for:"number",value:"Номер по порядку компонента в блоке"}),N(e("select",{id:"number","onUpdate:modelValue":p[2]||(p[2]=r=>t(s).number=r),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[p[9]||(p[9]=e("option",{disabled:"",value:null},"Укажите номер компонента в блоке",-1)),(l(!0),o(x,null,C(S.value,r=>(l(),o("option",{key:r,value:r},g(r),9,Ot))),128))],512),[[E,t(s).number]]),d(O,{class:"mt-1",message:t(s).errors.number},null,8,["message"])]),e("div",Nt,[d(k,{for:"tag_id",value:"Компонент"}),N(e("select",{id:"tag_id","onUpdate:modelValue":p[3]||(p[3]=r=>t(s).tag_id=r),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[p[10]||(p[10]=e("option",{disabled:"",value:null},"Выберите компонент",-1)),(l(!0),o(x,null,C(n.tags,r=>(l(),o("option",{key:r.id,value:r.id},g(r.name),9,qt))),128))],512),[[E,t(s).tag_id]]),d(O,{class:"mt-1",message:t(s).errors.tag_id},null,8,["message"])]),t(s).tag_id==8?(l(),o("div",Ft,[d(k,{for:"photo_count",value:"Количество фотографий в блоке"}),N(e("select",{id:"photo_count","onUpdate:modelValue":p[4]||(p[4]=r=>t(s).photo_count=r),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[p[11]||(p[11]=e("option",{disabled:"",value:null},"Укажите номер компонента в блоке",-1)),(l(!0),o(x,null,C(y.value,r=>(l(),o("option",{key:r,value:r},g(r),9,Mt))),128))],512),[[E,t(s).photo_count]]),d(O,{class:"mt-1",message:t(s).errors.photo_count},null,8,["message"])])):(l(),o("div",Tt,[d(k,{for:"position_id",value:"Расположение компонента в блоке"}),N(e("select",{id:"position_id","onUpdate:modelValue":p[5]||(p[5]=r=>t(s).position_id=r),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[p[12]||(p[12]=e("option",{disabled:"",value:null},"Выберите компонент",-1)),(l(!0),o(x,null,C(n.positions,r=>(l(),o("option",{key:r.id,value:r.id},g(r.name),9,Bt))),128))],512),[[E,t(s).position_id]]),d(O,{class:"mt-1",message:t(s).errors.position_id},null,8,["message"])])),e("div",Et,[d(G,{class:A(["px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-25":t(s).processing}]),disabled:t(s).processing},{default:L(()=>[...p[13]||(p[13]=[de(" Добавить ",-1)])]),_:1},8,["class","disabled"])]),n.err?(l(),o("div",Pt,g(n.err),1)):M("",!0)],32)]),e("div",Lt,[p[16]||(p[16]=e("h3",{class:"text-lg font-medium mb-4"},"Редактирование блоков страницы",-1)),_.value?(l(),o("div",Rt,[(l(!0),o(x,null,C(q,r=>(l(),o("div",{key:r.id,class:"bg-white rounded-lg shadow-md p-6"},[e("div",Dt,[e("h3",Gt," Блок #"+g(r.npp)+" (ID: "+g(r.id)+") ",1),e("span",Ht," Компонентов: "+g(r.components.length)+", Изображений: "+g(r.images),1)]),e("div",Jt,[X(r)?(l(),o("div",Qt,[e("div",Wt,[(l(!0),o(x,null,C(r.components,b=>(l(),o("div",{key:b.id,class:A(["component-item relative group",W(b.tag_id)])},[e("div",Xt,[e("span",Yt,g(Z(b.tag_id)),1),b.element?(l(),o("p",Zt,g(b.element),1)):M("",!0)]),e("button",{onClick:ee=>w(r.razdel_id,r.id,b.id),class:"absolute top-2 right-2 opacity-30 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded text-xs"}," × ",8,Kt)],2))),128))])])):Q(r)?(l(),o("div",es,[e("div",{class:A(["flex flex-col md:flex-row gap-6",{"md:flex-row-reverse":K(r)==="photo-right"}])},[e("div",ts,[(l(!0),o(x,null,C(r.components.filter(b=>se(b.tag_id)),b=>(l(),o("div",{key:b.id,class:A(["component-item relative group mb-4",W(b.tag_id)])},[e("div",ss,[e("span",ls,g(Z(b.tag_id))+" (№ п/п - "+g(b.number)+") ",1)]),e("button",{onClick:ee=>w(r.razdel_id,r.id,b.id),class:"absolute top-2 right-2 opacity-30 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded text-xs"}," × ",8,os)],2))),128))]),e("div",ds,[(l(!0),o(x,null,C(r.components.filter(b=>!se(b.tag_id)),b=>(l(),o("div",{key:b.id,class:A(["component-item relative group",W(b.tag_id)])},[e("div",is,[e("span",as,g(Z(b.tag_id))+" (№ п/п - "+g(b.number)+") ",1),b.element?(l(),o("p",rs,g(b.element),1)):M("",!0)]),e("button",{onClick:ee=>w(r.razdel_id,r.id,b.id),class:"absolute top-2 right-2 opacity-30 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded text-xs"}," × ",8,ns)],2))),128))])],2)])):(l(),o("div",us,[e("div",cs,[(l(!0),o(x,null,C(r.components,b=>(l(),o("div",{key:b.id,class:A(["component-item relative group",W(b.tag_id)])},[e("div",ms,[e("span",ps,g(Z(b.tag_id))+" (№ п/п - "+g(b.number)+") ",1),b.element?(l(),o("p",gs,g(b.element),1)):M("",!0)]),e("button",{onClick:ee=>w(r.razdel_id,r.id,b.id),class:"absolute top-2 right-2 opacity-30 group-hover:opacity-100 transition-opacity bg-red-500 text-white p-1 rounded text-xs"}," × ",8,fs)],2))),128))])]))]),e("div",_s,[d(G,{onClick:b=>$(r.razdel_id,r.id,r.npp),class:A(["bg-red-600 hover:bg-red-700",{"opacity-50":t(i).processing}]),disabled:t(i).processing},{default:L(()=>[t(i).processing?(l(),o("span",vs,"Удаление...")):(l(),o("span",bs,"Удалить блок"))]),_:1},8,["onClick","class","disabled"])])]))),128))])):(l(),o("div",ys,[...p[15]||(p[15]=[e("p",{class:"text-gray-500 text-lg"},"Нет блоков в выбранном разделе",-1)])]))])],64))}},ks=te(hs,[["__scopeId","data-v-44ae02ad"]]),ae={__name:"TextareaInput",props:{modelValue:{type:[Object,Array,String,Number,null],default:""}},emits:["update:modelValue"],setup(n,{expose:m,emit:s}){const i=n,V=s,y=P(null),q=B({get:()=>Array.isArray(i.modelValue)?i.modelValue.join(`
`):i.modelValue,set:F=>{const f=F.split(`
`).filter(_=>_.trim()!=="");V("update:modelValue",f)}});return ne(()=>{y.value.hasAttribute("autofocus")&&y.value.focus()}),m({focus:()=>y.value.focus()}),(F,f)=>N((l(),o("textarea",{class:"h-96 rounded-md border-gray-300 shadow-xs focus:border-indigo-500 focus:ring-indigo-500","onUpdate:modelValue":f[0]||(f[0]=_=>q.value=_),ref_key:"textarea",ref:y},null,512)),[[re,q.value]])}},xs={class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90"},ws={class:"relative w-full max-w-6xl max-h-screen"},$s={class:"flex justify-center items-center h-full top-0 cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},Vs=["src","alt"],zs={class:"absolute bottom-4 left-0 right-0 text-center text-white text-lg"},Us={class:"absolute bottom-0 left-0 right-0 flex justify-center gap-2 px-4 overflow-x-auto py-2"},Cs=["onClick"],Ss=["src","alt"],js={key:2,class:"absolute top-20 left-0 right-0 text-center text-white px-4"},As={key:0,class:"text-xl font-bold"},Is={key:1,class:"text-sm opacity-80"},Os={__name:"ModalGallery",props:{photos:{type:Array,required:!0},initialIndex:{type:Number,default:0},razdelId:{type:Number,default:0},blockId:{type:Number,default:0},componentId:{type:Number,default:0},imageId:{type:Number,default:0}},emits:["close"],setup(n,{emit:m}){const s=n,i=m,V=P(s.initialIndex),y=B(()=>s.photos[V.value]||{}),q=()=>{V.value<s.photos.length-1&&V.value++},F=()=>{V.value>0&&V.value--},f=S=>{V.value=S};function _(S){R.post(route("components.store"),{razdel_id:s.razdelId,block_id:s.blockId,component_id:s.componentId,image_id:s.imageId,photo_id:S})}const I=S=>{switch(S.key){case"Escape":i("close");break;case"ArrowLeft":F();break;case"ArrowRight":q();break}};return ne(()=>{window.addEventListener("keydown",I)}),ce(()=>{window.removeEventListener("keydown",I),document.body.style.overflow=""}),(S,v)=>(l(),o("div",xs,[e("div",ws,[e("button",{onClick:v[0]||(v[0]=u=>S.$emit("close")),class:"absolute top-4 right-4 z-10 text-white p-2 rounded-full hover:bg-gray-800 transition"},[...v[2]||(v[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",$s,[d(me,{name:"fade",mode:"out-in"},{default:L(()=>[(l(),o("img",{key:y.value.id,src:y.value.filename,class:"max-h-[90vh] max-w-full object-contain",alt:y.value.title,onClick:v[1]||(v[1]=u=>_(y.value.id))},null,8,Vs))]),_:1})]),V.value>0?(l(),o("button",{key:0,onClick:F,class:"absolute left-4 top-1/2 -translate-y-1/2 z-10 text-white p-3 bg-gray-800 rounded-full hover:bg-gray-700"},[...v[3]||(v[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])])):M("",!0),V.value<n.photos.length-1?(l(),o("button",{key:1,onClick:q,class:"absolute right-4 top-1/2 -translate-y-1/2 z-10 text-white p-3 bg-gray-800 rounded-full hover:bg-gray-700"},[...v[4]||(v[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):M("",!0),e("div",zs,g(V.value+1)+" / "+g(n.photos.length),1),e("div",Us,[(l(!0),o(x,null,C(n.photos,(u,c)=>(l(),o("div",{key:u.id,onClick:w=>f(c),class:A(["w-16 h-16 cursor-pointer border-2 transition",{"border-blue-500":c===V.value,"border-transparent":c!==V.value}])},[e("img",{src:u.thumbnail,class:"w-full h-full object-cover",alt:u.title},null,8,Ss)],10,Cs))),128))]),y.value.title||y.value.description?(l(),o("div",js,[y.value.title?(l(),o("h2",As,g(y.value.title),1)):M("",!0),y.value.description?(l(),o("p",Is,g(y.value.description),1)):M("",!0)])):M("",!0)])]))}},Ns=te(Os,[["__scopeId","data-v-4dfe48bc"]]),qs={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Fs={class:"bg-white shadow-sm rounded-lg p-6 mb-8"},Ms={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ts=["value"],Bs={class:"mt-2"},Es=["value"],Ps={class:"container mx-auto p-4 max-w-6xl"},Ls={key:0,class:"space-y-6"},Rs={class:"flex justify-between items-center mb-4"},Ds={class:"text-lg font-semibold text-gray-800"},Gs={class:"text-sm text-gray-500"},Hs={class:"border-2 border-dashed border-gray-200 rounded-lg p-4"},Js={key:0,class:"image-set-container"},Qs={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Ws=["onClick"],Xs={class:"text-sm font-medium"},Ys={key:1,class:"component-content"},Zs={class:"text-xs text-gray-600 mt-1"},Ks=["src","alt","onClick"],el={key:1,class:"image-block-container"},tl={class:"md:w-1/3"},sl=["onClick"],ll={class:"text-sm font-medium"},ol={key:1,class:"component-content"},dl={class:"text-xs text-gray-600 mt-1"},il=["src","alt","onClick"],al={class:"md:w-2/3 space-y-4"},rl={key:0,class:"component-content"},nl={class:"text-sm font-medium"},ul={class:"text-xs text-gray-600 mt-1"},cl={key:1,class:"component-content"},ml={class:"text-sm font-medium"},pl={key:2,class:"text-block-container"},gl={class:"space-y-4"},fl={key:0,class:"component-content"},_l={class:"text-sm font-medium"},vl={class:"text-xs text-gray-600 mt-1"},bl={key:1,class:"component-content"},yl={class:"text-sm font-medium"},hl={class:"mt-4 flex justify-end"},kl={key:0},xl={key:1},wl={class:"container mx-auto py-8"},$l={__name:"Components",props:{dashboard_title:{type:String},razdel_id:{type:Number},razdels:{type:[Object,Array],required:!0},block_id:{type:Number},blocks:{type:[Object,Array],required:!0,default:()=>({})},tags:{type:[Object,Array],required:!0,default:()=>({})},positions:{type:[Object,Array],required:!0,default:()=>({})},components:{type:[Object,Array],required:!0},photos:{type:Array,required:!0},err:{type:String}},setup(n){const m=n,s=D({razdel_id:m.razdel_id||null,block_id:m.block_id||null}),i=D({razdel_id:m.razdel_id||null,block_id:m.block_id||null,components:m.components}),V=P(!1),y=P(1),q=P(0),F=P(0),f=m.blocks[m.block_id],_=B(()=>m.block_id?f.npp:0),I=B(()=>m.block_id?f.positions:0),S=B(()=>m.block_id?f.images:0);function v(U){return Object.keys(U).map(T=>U[T])}const u=B(()=>v(m.components)),c=(U,h,a)=>{y.value=U,q.value=h,F.value=a,V.value=!0,document.body.style.overflow="hidden"},w=()=>{V.value=!1,document.body.style.overflow=""},$=(U,h="children")=>Array.isArray(U)?U.flatMap(({[h]:a,...T})=>[T,...$(a,h)]):[],Z=B(()=>$(m.razdels)),W=(U,h)=>{R.get(route("components.index"),{razdel_id:U,block_id:h},{preserveState:!0})},se=()=>{i.post(route("components.update",{razdel_id:m.razdel_id,block_id:m.block_id}),{preserveScroll:!0})},Q=U=>{var h;return((h=m.tags[U])==null?void 0:h.name)||"Неизвестный тег"},X=U=>{var h;return((h=m.positions[U])==null?void 0:h.name)||"Позиция не указана"},K=U=>{var h;return((h=m.tags[U])==null?void 0:h.comp_input)||""},z=U=>[7,8].includes(U),p=U=>U.images>0,r=U=>U.imageset===1,b=U=>U.image_position,ee=U=>["title-main","title-sub"].includes(U),ie=U=>["text-large","text-small","list-numbered","list-bulleted"].includes(U);return(U,h)=>(l(),o(x,null,[d(t(Y),{title:n.dashboard_title},null,8,["title"]),e("div",qs,[e("div",Fs,[h[7]||(h[7]=e("h2",{class:"text-lg font-medium mb-4"},"Выберите необходимый раздел (страницу сайта) и блок",-1)),e("form",null,[e("div",Ms,[e("div",null,[h[5]||(h[5]=e("label",{class:"block text-sm font-medium text-gray-700"}," Раздел (страница) сайта ",-1)),N(e("select",{"onUpdate:modelValue":h[0]||(h[0]=a=>t(s).razdel_id=a),onChange:h[1]||(h[1]=a=>W(t(s).razdel_id,0)),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[h[4]||(h[4]=e("option",{disabled:"",value:null},"Укажите раздел сайта",-1)),(l(!0),o(x,null,C(Z.value,a=>(l(),o("option",{key:a.id,value:a.id},g(a.title),9,Ts))),128))],544),[[E,t(s).razdel_id]])]),e("div",Bs,[d(k,{for:"blocks",value:"Номер блока на странице"}),N(e("select",{id:"blocks","onUpdate:modelValue":h[2]||(h[2]=a=>t(s).block_id=a),onChange:h[3]||(h[3]=a=>W(t(s).razdel_id,t(s).block_id)),class:"block w-full mt-1 border-gray-300 rounded-md shadow-xs focus:border-indigo-500 focus:ring-indigo-500"},[h[6]||(h[6]=e("option",{disabled:"",value:null},"Укажите номер блока на странице",-1)),(l(!0),o(x,null,C(n.blocks,a=>(l(),o("option",{key:a.id,value:a.id},g(a.npp),9,Es))),128))],544),[[E,t(s).block_id]])])])])])]),e("form",{onSubmit:J(se,["prevent"]),class:"p-4 bg-gray-50 rounded-lg"},[e("div",Ps,[h[8]||(h[8]=e("h3",{class:"text-lg font-medium mb-4"},"Заполните компоненты содержимым",-1)),n.block_id?(l(),o("div",Ls,[e("div",Rs,[e("h3",Ds," Блок #"+g(_.value)+" (ID: "+g(n.block_id)+") ",1),e("span",Gs," Компонентов: "+g(I.value)+", Изображений: "+g(S.value),1)]),e("div",Hs,[r(t(f))?(l(),o("div",Js,[e("div",Qs,[(l(!0),o(x,null,C(u.value,a=>(l(),o("div",{key:a.id,class:A(["component-item relative group",K(a.tag_id)])},[a.image_id==0?(l(),o("div",{key:0,onClick:T=>c(y.value,a.id,a.image_id),class:"component-content cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},[e("span",Xs,g(Q(a.tag_id)),1)],8,Ws)):(l(),o("div",Ys,[e("p",Zs,[e("img",{src:a.image,alt:a.description,onClick:T=>c(y.value,a.id,a.image_id),class:"cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},null,8,Ks)])]))],2))),128))])])):p(t(f))?(l(),o("div",el,[e("div",{class:A(["flex flex-col md:flex-row gap-6",{"md:flex-row-reverse":b(t(f))==="photo-right"}])},[e("div",tl,[(l(!0),o(x,null,C(u.value.filter(a=>z(a.tag_id)),a=>(l(),o("div",{key:a.id,class:A(["component-item relative group mb-4",K(a.tag_id)])},[a.image_id==0?(l(),o("div",{key:0,onClick:T=>c(y.value,a.id,a.image_id),class:"component-content cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},[e("span",ll,g(Q(a.tag_id))+" ("+g(X(a.position_id))+") ",1)],8,sl)):(l(),o("div",ol,[e("p",dl,[e("img",{src:a.image,alt:a.description,onClick:T=>c(y.value,a.id,a.image_id),class:"cursor-pointer overflow-hidden rounded-lg hover:shadow-md transition"},null,8,il)])]))],2))),128))]),e("div",al,[(l(!0),o(x,null,C(u.value.filter(a=>!z(a.tag_id)),a=>(l(),o("div",{key:a.id,class:A(["component-item relative group",K(a.tag_id)])},[ee(a.tag_class)?(l(),o("div",rl,[e("span",nl,g(Q(a.tag_id))+" ("+g(X(a.position_id))+") ",1),e("p",ul,[d(j,{id:a.tag_id,type:"text",class:"mt-1 block w-full",modelValue:t(i).components[a.id].text,"onUpdate:modelValue":T=>t(i).components[a.id].text=T},null,8,["id","modelValue","onUpdate:modelValue"])])])):ie(a.tag_class)?(l(),o("div",cl,[e("span",ml,g(Q(a.tag_id))+" ("+g(X(a.position_id))+") ",1),d(ae,{id:a.tag_id,type:"text",class:"mt-1 block w-full",modelValue:t(i).components[a.id].text,"onUpdate:modelValue":T=>t(i).components[a.id].text=T},null,8,["id","modelValue","onUpdate:modelValue"])])):M("",!0)],2))),128))])],2)])):(l(),o("div",pl,[e("div",gl,[(l(!0),o(x,null,C(u.value,a=>(l(),o("div",{key:a.id,class:A(["component-item relative group",K(a.tag_id)])},[ee(a.tag_class)?(l(),o("div",fl,[e("span",_l,g(Q(a.tag_id))+" ("+g(X(a.position_id))+") ",1),e("p",vl,[d(j,{id:a.tag_id,type:"text",class:"mt-1 block w-full",modelValue:t(i).components[a.id].text,"onUpdate:modelValue":T=>t(i).components[a.id].text=T},null,8,["id","modelValue","onUpdate:modelValue"])])])):ie(a.tag_class)?(l(),o("div",bl,[e("span",yl,g(Q(a.tag_id))+" ("+g(X(a.position_id))+") ",1),d(ae,{id:a.tag_id,type:"text",class:"mt-1 block w-full",modelValue:t(i).components[a.id].text,"onUpdate:modelValue":T=>t(i).components[a.id].text=T},null,8,["id","modelValue","onUpdate:modelValue"])])):M("",!0)],2))),128))])]))]),e("div",hl,[d(G,{class:A(["px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500",{"opacity-50":t(i).processing}]),disabled:t(i).processing},{default:L(()=>[t(i).processing?(l(),o("span",kl,"Удаление...")):(l(),o("span",xl,"Сохранить изменения"))]),_:1},8,["class","disabled"])]),e("div",wl,[V.value?(l(),H(Ns,{key:0,"initial-index":y.value,photos:m.photos,"razdel-id":t(s).razdel_id,"block-id":t(s).block_id,"component-id":q.value,"image-id":F.value,onClose:w},null,8,["initial-index","photos","razdel-id","block-id","component-id","image-id"])):M("",!0)])])):M("",!0)])],32)],64))}},Vl=te($l,[["__scopeId","data-v-0303eef5"]]),zl=["value","selected"],Ul={class:"mt-4"},Cl=["id","value","checked"],Sl=["for"],jl={class:"mt-4"},Al={class:"mt-4"},Il={class:"mt-4"},Ol={class:"mt-4"},Nl={class:"mt-4 flex items-center justify-end"},ql={__name:"Register",props:{dashboard_title:{type:String},components:{type:Object,required:!0},err:{type:String}},setup(n){const m=n,s=D({name:"",email:"",password:"",password_confirmation:"",role_id:2,permissions:[]}),i=oe(m.components.roles),V=oe(m.components.permissions),y=()=>{if(!s.permissions.length){alert("Обязательно укажите разрешение для работы пользователя");return}if(s.password!==s.password_confirmation){alert("Пароли не совпадают");return}s.post(route("register"),{onFinish:()=>s.reset("password","password_confirmation")})},q=F=>s.permissions.includes(F);return(F,f)=>(l(),o(x,null,[d(t(Y),{title:n.dashboard_title},null,8,["title"]),e("form",{onSubmit:J(y,["prevent"]),class:"register-form"},[e("div",null,[d(k,{for:"roles",value:"Роль"}),N(e("select",{id:"roles","onUpdate:modelValue":f[0]||(f[0]=_=>t(s).role_id=_),class:"register-select"},[f[6]||(f[6]=e("option",{disabled:"",value:"0"},"Назначте роль пользователю",-1)),(l(!0),o(x,null,C(i,_=>(l(),o("option",{key:_.id,value:_.id,selected:t(s).role_id==_.id},g(_.name),9,zl))),128))],512),[[E,t(s).role_id]])]),e("div",Ul,[d(k,{for:"permissions",value:"Выданные разрешения"}),(l(!0),o(x,null,C(V,_=>(l(),o("div",{id:"permissions",key:_.id,class:"flex items-center gap-2"},[N(e("input",{type:"checkbox",id:"permission-"+_.id,value:_.id,"onUpdate:modelValue":f[1]||(f[1]=I=>t(s).permissions=I),checked:q(_.id),class:"rounded-sm border-gray-300 text-indigo-600 shadow-xs focus:ring-indigo-500"},null,8,Cl),[[le,t(s).permissions]]),e("label",{for:"permission-"+_.id},g(_.name),9,Sl)]))),128)),d(O,{class:"mt-2",message:t(s).errors.permissions},null,8,["message"])]),e("div",jl,[d(k,{for:"name",value:"Имя пользователя"}),d(j,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(s).name,"onUpdate:modelValue":f[2]||(f[2]=_=>t(s).name=_),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),d(O,{class:"mt-2",message:t(s).errors.name},null,8,["message"])]),e("div",Al,[d(k,{for:"email",value:"E-mail"}),d(j,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:t(s).email,"onUpdate:modelValue":f[3]||(f[3]=_=>t(s).email=_),required:"",autocomplete:"username"},null,8,["modelValue"]),d(O,{class:"mt-2",message:t(s).errors.email},null,8,["message"])]),e("div",Il,[d(k,{for:"password",value:"Пароль"}),d(j,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:t(s).password,"onUpdate:modelValue":f[4]||(f[4]=_=>t(s).password=_),required:"",autocomplete:"new-password"},null,8,["modelValue"]),d(O,{class:"mt-2",message:t(s).errors.password},null,8,["message"])]),e("div",Ol,[d(k,{for:"password_confirmation",value:"Повторить пароль"}),d(j,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:t(s).password_confirmation,"onUpdate:modelValue":f[5]||(f[5]=_=>t(s).password_confirmation=_),required:"",autocomplete:"new-password"},null,8,["modelValue"]),d(O,{class:"mt-2",message:t(s).errors.password_confirmation},null,8,["message"])]),e("div",Nl,[d(G,{class:A(["ms-4",{"opacity-25":t(s).processing}]),disabled:t(s).processing},{default:L(()=>[...f[7]||(f[7]=[de(" Зарегистрировать пользователя ",-1)])]),_:1},8,["class","disabled"])])],32)],64))}},Fl=te(ql,[["__scopeId","data-v-9f49f2db"]]),Ml={class:"text-xl font-semibold leading-tight text-gray-800"},Tl={class:"py-2"},Bl={class:"mx-auto sm:px-6 lg:px-8"},El={class:"bg-white shadow-xs sm:rounded-lg"},Pl={key:0,class:"p-6 text-gray-900"},Ll={key:1,class:"p-6 text-gray-900"},Rl={key:2,class:"p-6 text-gray-900"},Dl={key:3,class:"p-6 text-gray-900"},Gl={key:4,class:"p-6 text-gray-900"},Hl={key:5,class:"p-6 text-gray-900"},eo={__name:"Dashboard",props:{dashboard:{type:String},dashboard_title:{type:String},lvl:{type:Number},parent_id:{type:Number},razdel_id:{type:Number},razdels:{type:Object,default:()=>[]},photos:{type:[Object,Array],default:()=>[]},tags:{type:[Object,Array],default:()=>[]},block_id:{type:Number},blocks:{type:[Object,Array],default:()=>[]},positions:{type:[Object,Array],default:()=>[]},components:{type:[Object,Array],default:()=>[]},err:{type:String}},setup(n){const m=n,s=P(m.dashboard_title),i=P(m.dashboard);return(V,y)=>(l(),o(x,null,[d(t(Y),{title:s.value},null,8,["title"]),d(ue,null,{header:L(()=>[e("h2",Ml,g(s.value),1)]),default:L(()=>[e("div",Tl,[e("div",Bl,[e("div",El,[i.value==="register"?(l(),o("div",Pl,[(l(),H(Fl,{components:n.components,dashboard_title:s.value,err:n.err,key:n.components},null,8,["components","dashboard_title","err"]))])):M("",!0),i.value==="razdels"?(l(),o("div",Ll,[(l(),H(Ge,{lvl:n.lvl,parent_id:n.parent_id,razdels:n.razdels,dashboard_title:s.value,err:n.err,key:n.razdels},null,8,["lvl","parent_id","razdels","dashboard_title","err"]))])):i.value==="photos"?(l(),o("div",Rl,[(l(),H(ct,{photos:n.photos,razdel_id:n.razdel_id,razdels:n.razdels,dashboard_title:s.value,err:n.err,key:n.photos},null,8,["photos","razdel_id","razdels","dashboard_title","err"]))])):i.value==="tags"?(l(),o("div",Dl,[(l(),H(Ut,{tags:n.tags,dashboard_title:s.value,err:n.err,key:n.tags},null,8,["tags","dashboard_title","err"]))])):i.value==="blocks"?(l(),o("div",Gl,[(l(),H(ks,{razdel_id:n.razdel_id,razdels:n.razdels,blocks:n.blocks,tags:n.tags,positions:n.positions,dashboard_title:s.value,err:n.err,key:n.blocks},null,8,["razdel_id","razdels","blocks","tags","positions","dashboard_title","err"]))])):i.value==="components"?(l(),o("div",Hl,[(l(),H(Vl,{components:n.components,razdel_id:n.razdel_id,razdels:n.razdels,block_id:n.block_id,blocks:n.blocks,tags:n.tags,positions:n.positions,photos:n.photos,dashboard_title:s.value,err:n.err,key:n.components},null,8,["components","razdel_id","razdels","block_id","blocks","tags","positions","photos","dashboard_title","err"]))])):M("",!0)])])])]),_:1})],64))}};export{eo as default};
